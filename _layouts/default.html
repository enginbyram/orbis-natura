<!DOCTYPE html>
<html lang="{{ page.lang | default: "en" }}">
  {%- include head.html -%}
  <body a="{{ site.theme_config.appearance | default: "auto" }}">

    <!-- Container that holds everything -->
    <div class="holy-grail__main">

      <!-- Side panel content goes here -->
      {%- include l_sidepanel.html -%}

      <!-- Page main content here -->
      <main class="page-content" aria-label="Content">
        <div class="w">
          {{ content }}
        </div>
      </main>

      <!-- Side ToC popup -->
      <div class="caret-cont" onclick="toggleTocContainer()">
        <i class="fa-solid fa-caret-right fa-lg" style="color: rgb(198, 208, 245);"></i>
      </div>
      <nav class="toc-panel__container">
        <div class="toc-content">
            <!-- Content goes here -->
            {% include toc.html html=content ordered=true %}
        </div>
      </nav>
      <script>
        function toggleTocContainer() {
            var tocContainer = document.querySelector('.toc-panel__container');
            tocContainer.classList.toggle('collapsed');
        }
        document.addEventListener('DOMContentLoaded', toggleTocContainer);
      </script>
    </div>

    <!-- FOOTER HERE -->
    {%- include footer.html -%}

    <!-- Some site scripts here, do not touch -->
    {%-if site.goat_counter and jekyll.environment == "production"-%}
      {%-include goat_counter.html-%}
    {%-endif-%}



    <!-- Side Panel scripts are here -->
    <!-- External scripting is not working for some reason -->
    <!-- scaffold script is here, do not touch -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var button = document.querySelector(".scaff-button");
        var content = document.querySelector(".scaff-content");

        button.addEventListener("click", function() {
          content.classList.toggle("collapsed");
        });
      });
    </script>

    <!-- Side panel show/hide script -->
    <script>
      function toggleSidePanel() {
        var sidePanel = document.querySelector('.side-panel');
        var overlayScreen = document.querySelector('.overlay-screen');
        var caretButton = document.querySelector('.caret-cont-sidepanel');
        
        caretButton.classList.toggle('press');
        sidePanel.classList.toggle('collapsed');
        overlayScreen.classList.toggle('hidden');
      }
      document.addEventListener('DOMContentLoaded', toggleSidePanel());
    </script>
  </body>
</html>